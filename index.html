<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <title>Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body class="d-flex flex-row justify-content-center" style="background: rgb(253, 253, 253); ">
        <div class="main  col-lg-3 col-md-8 col-sm-12 pt-2 ps-2 shadow-lg" style="z-index: 100;">
      
            <p class="result"></p>
            <p class="screen me-4 p-4" contenteditable=""> </p>
         
            <div class="d-flex flex-row">
            <div class="col-9">
            <div class="d-flex flex-row my-2">
               
                <button onclick="u_op_func('cos')" class="operation mx-2 col-3 bg-light text-secondary shadow-sm">cos</button>
                <button onclick="u_op_func('sin')" class="operation mx-2 col-3 bg-light text-secondary shadow-sm">sin</button>
                <button onclick="clear_all()" class="operation mx-2 col-3 bg-light text-secondary shadow-sm">clear</button>
            </div>
            <div class="d-flex flex-row my-2">

                <button onclick="par_func('(')" class="operator mx-2 col-3 bg-light text-secondary shadow-sm">(</button>
                <button onclick="par_func(')')" class="operator mx-2 col-3 bg-light text-secondary shadow-sm">)</button>
                <button onclick="u_op_func('%')" class="operation col-3 mx-2 oper shadow-sm">%</button>
            </div>


            <div class="d-flex flex-row my-2">

                <button onclick="nb_func('7')" class="col-3 mx-2 bg-light text-primary fw-bold shadow-sm">7</button>
                <button onclick="nb_func('8')" class="col-3 mx-2 bg-light text-primary fw-bold shadow-sm">8</button>
                <button onclick="nb_func('9')" class="col-3 mx-2 bg-light text-primary fw-bold shadow-sm">9</button>
            </div>
            <div class="d-flex flex-row my-2">

                <button onclick="nb_func('4')" class="col-3 mx-2 bg-light text-primary fw-bold shadow-sm">4</button>
                <button onclick="nb_func('5')" class="col-3 mx-2 bg-light text-primary fw-bold shadow-sm">5</button>
                <button onclick="nb_func('6')" class="col-3 mx-2 bg-light text-primary fw-bold shadow-sm">6</button>
            </div>
            <div class="d-flex flex-row my-2">

                <button onclick="nb_func('1')" class="col-3 mx-2 bg-light text-primary fw-bold shadow-sm">1</button>
                <button onclick="nb_func('2')" class="col-3 mx-2 bg-light text-primary fw-bold shadow-sm">2</button>
                <button onclick="nb_func('3')" class="col-3 mx-2 bg-light text-primary fw-bold shadow-sm">3</button>
            </div>
            <div class="d-flex flex-row my-2">
                <button onclick="nb_func('0')" class="col-7 ms-2 bg-light me-2 text-primary fw-bold shadow-sm">0</button>
                <button onclick="op_func()" class="col-3 me-1 ms-2 bg-light text-primary fw-bold shadow-sm">.</button>
            </div> 
        </div>  
        <div class="d-flex-flex-column col-3">
            <button onclick="opartor_func('/')" class="operator me-2 my-2 col-9 bg-light text-secondary shadow-sm">/</button>
            <button onclick="opartor_func('-')" class="operator me-2 my-2 col-9 oper shadow-sm">-</button>
            <button onclick="opartor_func('x')" class="operator me-2 my-2 col-9 oper shadow-sm">x</button>
            <button onclick="opartor_func('+')" class="operator me-2 my-2 col-9 py-4 oper shadow-sm">+</button>
            <button onclick="equal_func()" class="equal me-2 my-2 col-9 py-4 bg-primary text-light">=</button>
        </div>

        </div>


            
            
            
            

          
    </div>

    
    
</body>

</html>
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>


<script>
    
    var tab=[];
    var operation="";

function u_op_func(element){

    var v= $('.screen').text()
        if(v=='' || v==' '){
        operation=operation+element;
        tab.push(element);
        
        $('.result').text(operation);
        }

}

    function count(element) {

        let occ=0;
        for(i=0;i<tab.length;i++){

            if(tab[i]==element){
                occ++;
            }

        }
        return occ;
      }



      function op_func(){
            let v=$('.screen').text();

            if(v[v.length-1]!='.'){

                v=v+'.';
                $('.screen').text(v);
                operation+='.';    
                $('.result').text(operation);
            }
      }

    function syntax_true() {

          if(count('(')==count(')')){

              return true ;
              
          }
          return false;

      }

    function evaluate_par(inter){
    while(inter.length!=1){
   

        if(inter.indexOf('cos')!=-1){
            var index=inter.indexOf('cos');
            inter[index]=Math.cos(inter[index+1]);
            inter.splice(index+1,1);



        }
       else if(inter.indexOf('sin')!=-1){
            var index=inter.indexOf('sin');
            inter[index]=Math.sin(inter[index+1]);
            inter.splice(index+1,1);



        }
    else if(inter.indexOf('/')!=-1){

            var v=inter.indexOf('/');
            var op1=parseFloat(inter[v-1]);
            var op2=parseFloat(inter[v+1]);
            inter[v]=op1/op2;
            inter.splice(v-1,1);
            inter.splice(v,1);

        }
        else if(inter.indexOf('x')!=-1){

            var v=inter.indexOf('x');
            var op1=parseFloat(inter[v-1]);
            var op2=parseFloat(inter[v+1]);
            inter[v]=op1*op2;
            inter.splice(v-1,1);
            inter.splice(v,1);

            }

        
            else if(inter.indexOf('+')!=-1){

                var v=inter.indexOf('+');
                var op1=parseFloat(inter[v-1]);
                var op2=parseFloat(inter[v+1]);
                inter[v]=op1+op2;
                inter.splice(v-1,1);
                inter.splice(v,1);

            }    

            else if(inter.indexOf('-')!=-1){

                var v=inter.indexOf('-');
                var op1=parseFloat(inter[v-1]);
                var op2=parseFloat(inter[v+1]);
                inter[v]=op1-op2;
                inter.splice(v-1,1);
                inter.splice(v,1);

}   
    



    }
    
    console.log(inter[0]);
    return inter[0];
    
    
    
    }

  
    function par_func(val){
       var v= $('.screen').text()
        if(v=='' || v==' ' && val=='('){
        operation=operation+val;
        tab.push(val);
        
        $('.result').text(operation);
        }else if(val==')'){

            if(v!=''){
            tab.push(v);
            tab.push(val);
            operation+=val;
            clear_all();    


            $('.result').text(operation);
            }
        }

    }
    function clear_all(){
        $('.screen').text('');
        $('.result').text('');
    }
    function nb_func(txt){
        var val= $('.screen').text();
       val=val+txt;
       $('.screen').text(val);
       operation+=txt;
       $('.result').text(operation);

    }
    function opartor_func(op){
        var val= $('.screen').text();
        if(val!=''){
            operation+=op;
            $('.result').text(operation);     
         tab.push(val);
        tab.push(op);
    }
        clear_all();


    }
    function equal_func(){
        if($('.screen').text()!=''){
        tab.push($('.screen').text());
            }
            operation+=$('.screen').text()+'=';
            
        clear_all();
        if(syntax_true()==true){
        

       while(tab.length!=1){
          
        while(tab.indexOf('(')!=-1){
            var begin=tab.lastIndexOf('(');
            var end=tab.indexOf(')');

            var inter=[];
            inter=tab.slice(begin+1,end);

            tab[begin]=evaluate_par(inter);
            tab.splice(begin+1,end-begin);
       
          
         


        }   

        if(tab.indexOf('cos')!=-1){
            var index=tab.indexOf('cos');
            tab[index]=Math.cos(tab[index+1]);
            tab.splice(index+1,1);



        }
       else if(tab.indexOf('sin')!=-1){
            var index=tab.indexOf('sin');
            tab[index]=Math.sin(tab[index+1]);
            tab.splice(index+1,1);



        }
       else if(tab.indexOf('/')!=-1){

            var v=tab.indexOf('/');
            var op1=parseFloat(tab[v-1]);
            var op2=parseFloat(tab[v+1]);
            tab[v]=op1/op2;
            tab.splice(v-1,1);
            tab.splice(v,1);

        }
       else if(tab.indexOf('x')!=-1){

            var v=tab.indexOf('x');
            var op1=parseFloat(tab[v-1]);
            var op2=parseFloat(tab[v+1]);
            tab[v]=op1*op2;
            tab.splice(v-1,1);
            tab.splice(v,1);

            }

        
          else  if(tab.indexOf('+')!=-1){

                var v=tab.indexOf('+');
                var op1=parseFloat(tab[v-1]);
                var op2=parseFloat(tab[v+1]);
                tab[v]=op1+op2;
                tab.splice(v-1,1);
                tab.splice(v,1);

            }    

          else if(tab.indexOf('-')!=-1){

                var v=tab.indexOf('-');
                var op1=parseFloat(tab[v-1]);
                var op2=parseFloat(tab[v+1]);
                tab[v]=op1-op2;
                tab.splice(v-1,1);
                tab.splice(v,1);

}   


    }

    operation=operation+tab[0];
    alert(tab[0]);
   
    tab=[];
    $('.result').text('');
    operation="";
}
else {

alert("syntax incorrect please add another )");

}
}
 



</script>